<div class="container-fluid">
    <div class="row mx-0 px-0" id="pageheader">
        <div class="col-sm-4">
            <span class="page-name">
                Agent Activity
            </span>
        </div>
        <div class="col-sm-8 text-end">
            <form  [formGroup]="filterForm">
            <div class="row g-2">
                <div class="col-sm">
                    <ngx-select  [allowClear]="true" [items]="allAgentLists" formControlName="AgentId"
                     optionValueField="AgentId" (select)="areaSubAgentByAgentId();" optionTextField="FullName" placeholder="Select Agent"
                    (remove)="clearFilter('Agent')" >
                </ngx-select>
                </div>
                <div class="col-sm">
                    <div class="col-sm">
                        <ngx-select  [allowClear]="true" [items]="allAgentLists" formControlName="subAreaAgentId">
                        </ngx-select>
                    </div>
                </div>
                <div class="col-sm">
                    <ngx-select  [allowClear]="true" [items]="allSubAgentsByAgentId" formControlName="BoothId"
                         optionValueField="BoothId" (select)="selBothId($event);" optionTextField="BoothName" placeholder="Select Booth"
                        (remove)="clearFilter('Booth')" >
                        </ngx-select>
                    
                </div>
           
            </div>
        </form>
        </div>
    </div>

    <div class="row chartbox mb-3">
        <div class="col-sm-4">
            <div class="card">
                <div class="card-body">
                    <div class="profile-info">
                        <div class="d-flex mb-3">
                            <div class="flex-shrink-0">
                                <img src="{{agentProfileData?.ProfilePhoto != '' ? agentProfileData?.ProfilePhoto : 'assets/images/Profile-Photo.jpg'}}">
                            </div>
                            <div class="flex-grow-1 ms-3 pt-2">
                                <h5 >{{agentProfileData?.FullName | titlecase}}</h5>
                                <p class="contact mb-0">+91-{{agentProfileData?.MobileNo}}</p>
                                <p class="contact mb-0">Address</p>
                                <p class="mb-0"><small>{{agentProfileData?.Address | titlecase}}</small></p>
                                <p class="mb-0">{{agentProfileData?.Emailid}}</p>
                                <!-- <p class="mb-0">{{agentProfileData?.Gender == 1 ? 'Male' : 'Female'}}</p> -->
                                <span class="badge bg-danger py-1 fw-normal rounded-pill px-3 mt-1">
                                    This Agent is Blocked
                                </span>
                            </div>
                          </div>                        
                        <div class="mb-3">
                            <small class="text-muted">Booths(s) Assigned :</small>
                            <p class="area">Bibwewadi, Kondhwa, Pune</p>
                        </div>
                        <div class="row row-cols-1 row-cols-md-3 g-2 mb-3">
                            <div class="col">
                                <div class="card shadow-none border">
                                    <div class="card-body p-2">
                                        <h5 class="card-title">{{agentProfileCardData?.TotalVoter}}</h5>
                                        <p class="card-text">
                                            Total Voters
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card shadow-none border">
                                    <div class="card-body p-2">
                                        <h5 class="card-title">{{agentProfileCardData?.TotalFilled}}</h5>
                                        <p class="card-text">
                                            Data Filled
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card shadow-none border">
                                    <div class="card-body p-2">
                                        <h5 class="card-title">{{agentProfileCardData?.Pending}}</h5>
                                        <p class="card-text">
                                            Date Pending
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card shadow-none border">
                                    <div class="card-body p-2">
                                        <h5 class="card-title">{{agentProfileCardData?.TotalMigrated}}</h5>
                                        <p class="card-text">
                                            Total Migrated
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card shadow-none border">
                                    <div class="card-body p-2">
                                        <h5 class="card-title">{{agentProfileCardData?.TotalFamily}}</h5>
                                        <p class="card-text">
                                            Total Families
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card shadow-none border">
                                    <div class="card-body p-2">
                                        <h5 class="card-title">{{agentProfileCardData?.NewVoter}}</h5>
                                        <p class="card-text">
                                            New Voters
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card card-body shadow-none border mb-3">
                            Pie chart<br>
                            <div class="agentProfilePiChart" style="height: 250px;"></div>
                        </div>

                        <div class="row justify-content-end">
                            <div class="col-sm-6 text-end">
                                <button class="btn btn-main btn-sm">
                                    Block Agent
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-8">
            <div class="card mb-3" *ngIf="defaultVaoterListFlag">
                <div class="card-header">
                    <div class="row justify-content-end">
                        <!-- <div class="col-sm">
                            <div class="form-check">
                                <input class="form-check-input mt-2" type="checkbox" value="" id="chkNewvoters">
                                <label class="form-check-label" for="chkNewvoters">
                                    Show New Voters
                                </label>
                            </div>
                        </div>
                        <div class="col-sm-auto">
                            <div class="form-check">
                                <input class="form-check-input mt-2" type="checkbox" value="" id="chkRemaining">
                                <label class="form-check-label" for="chkRemaining">
                                    Show Remaining Voters
                                </label>
                            </div>
                        </div> -->
                            <form [formGroup]="voterProfilefilterForm">
                                <div class="row g-1 mb-2 border-bottom pb-2">
                                    <div class="offset-sm-4 col-sm-4">
                                        <div class="input-group">
                                            <input [owlDateTime]="dt3"  formControlName="weekRangePicker"   [selectMode]="'range'"  (dateTimeChange)="voterDateRangeSelect(this.voterProfilefilterForm.value.weekRangePicker)" class="form-control" [owlDateTimeTrigger]="dt3" placeholder="From To Date">
                                            <button class="btn btn-light border btn-sm" type="button" *ngIf="this.voterProfilefilterForm.value.weekRangePicker" [owlDateTimeTrigger]="dt3">
                                                <i class="fas fa-calendar-alt"></i></button>
                                            <button class="btn btn-light border btn-sm" type="button"  *ngIf="!this.voterProfilefilterForm.value.weekRangePicker"  (click)="clearFilterVoter('dateRangePIcker')">
                                                <i class="fas fa-times"></i></button>
                                        </div>
                                        <owl-date-time #dt3 [pickerType]="'calendar'"></owl-date-time>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="input-group">
                                            <input type="text" class="form-control" formControlName="Search" placeholder="Search..." (keyup)="onKeyUpSearchFilter()" />
                                            <button type="button" class="btn btn-light border btn-sm" (click)="clearFilterVoter('search')" *ngIf="voterProfilefilterForm.value.Search" ><i
                                                  class="fas fa-times"></i></button>
                                            <button type="button" *ngIf="!voterProfilefilterForm.value.Search" class="btn btn-sm border btn-light" (click)="searchVoterFilter(true)"><i class="fas fa-search"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                    </div>
                </div>
                <div class="card-body profile-info">
                    <div class="row g-2 mb-3">
                        <div class="col-sm">
                            <a (click)="getClientBoothAgentVoterList()" class="card p-2 card-body shadow-none border box-link">
                                <h5 class="card-title">{{this.votersCardData?.TotalVoters}}</h5>
                                <p class="card-text"> Voters </p>
                            </a>
                        </div>
                        <div class="col-sm">
                            <a (click)="clickOnFamiliyCard()"   class="card p-2 card-body shadow-none border box-link">
                                <h5 class="card-title">{{this.votersCardData?.TotalFamiliy}}</h5>
                                <p class="card-text"> Families </p>
                            </a>
                        </div>
                        <!-- <div class="col-sm">
                            <a routerLink="#" class="card p-2 card-body shadow-none border box-link">
                                <h5 class="card-title">2426</h5>
                                <p class="card-text"> Pending </p>
                            </a>
                        </div>
                        <div class="col-sm">
                            <a routerLink="#" class="card p-2 card-body shadow-none border box-link">
                                <h5 class="card-title">2426</h5>
                                <p class="card-text"> Filled </p>
                            </a>
                        </div> -->
                        <div class="col-sm">
                            <a (click)="clickOnNewVotersCard()" class="card p-2 card-body shadow-none border box-link">
                                <h5 class="card-title">{{this.votersCardData?.NewVoters}}</h5>
                                <p class="card-text"> New Voters </p>
                            </a>
                        </div>
                    </div>

                    <div class="card mb-3 shadow-none border">
                        <div class="card-header pb-0">
                            Agent Performance
                        </div>
                        <div class="card-body pt-1">
                           <!-- <div class="agentProfilePiChart"></div> -->
                        </div>
                    </div>

                    <table class="table table-hover mb-0">
                        <thead>
                            <tr>
                                <th>Sr. No.</th>
                                <th>Voters Full Name</th>
                                <th>Visit Time</th>
                                <th>Voter NO.</th>
                                <th>Gender</th>
                                <th>Contact No</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let clientBooth of clientBoothAgentVoterList | paginate: {itemsPerPage: 10, currentPage: votersPaginationNo, totalItems:votersTotal}">
                                <td>{{clientBooth?.SrNo}}</td>
                                <td>{{clientBooth?.EnglishName | titlecase}}</td>
                                <td>{{clientBooth?.SurveyDate}}</td>
                                <td>{{clientBooth?.VoterNo}}</td>
                                <td>{{clientBooth?.Gender == 'F' ? 'Female' : 'Male'}}</td>
                                <td>{{clientBooth?.MobileNo1}} {{clientBooth?.MobileNo2}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <pagination-controls
                    *ngIf="clientBoothAgentVoterList?.length != 0" previousLabel=""
                    nextLabel=""
                    (pageChange)="onClickPagintionVoters(votersPageSize = $event)">
                </pagination-controls>
                </div>
            </div>

            
        </div>
    </div>
</div>