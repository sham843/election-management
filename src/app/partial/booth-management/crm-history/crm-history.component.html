<div class="container-fluid">
    <div class="row mx-0 px-0" id="pageheader">
        <div class="col-sm-auto">
            <span class="page-name">CRM History
            </span>
        </div>
    </div>
    <div class="row chartbox">
        <div class="col-sm-12">
            <div class="card card-body">
                <div class="row chartbox gx-2">
                    <div class="col-sm-12">
                        <div class="row form-container gx-2">
                            <div class="col-sm-8">
                                <div class="card shadow-none border mb-3">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <span class="votername">{{voterProfileData?.marathiName}}</span>
                                            <button type="submit" class="btn btn-light btn-sm text-main" (click)="disableDiv = false">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                    </div>
                                    <div class="card-body pt-1">
                                        <div class="d-flex">
                                            <div class="flex-shrink-0" *ngIf="voterProfileData?.voterPhoto">
                                                <img src="{{voterProfileData?.voterPhoto}}" alt="Profile" class="profile-pic">
                                            </div>
                                            <div class="flex-shrink-0" *ngIf="!voterProfileData?.voterPhoto">
                                                <img src="assets/images/user.png" alt="Profile" class="profile-pic">
                                            </div>
                                            <div class="flex-grow-1 ms-3">
                                                <div class="row mb-2 g-2">
                                                    <div class="col-sm-2">
                                                        <label class="form-label">Age</label>
                                                        <div class="form-data">{{voterProfileData?.age ? voterProfileData?.age : '-'}}</div>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <label class="form-label">Gender</label>
                                                        <div class="form-data">{{voterProfileData?.gender == 'M' ? 'Male' : 'Female'}}</div>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <label class="form-label">House No.</label>
                                                        <div class="form-data">{{voterProfileData?.houseNo ? voterProfileData?.houseNo : '-'}}</div>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <label class="form-label">Booth Name</label>
                                                        <div class="form-data">{{voterProfileData?.boothName}}</div>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <label class="form-label">Voter No</label>
                                                        <div class="form-data">{{voterProfileData?.voterNo}}</div>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <label class="form-label">Family Head</label>
                                                        <div class="form-data"> {{voterProfileData?.head == 'yes' ? 'Yes' : 'No'}} ({{voterProfileData?.familySize}} Members)</div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <label class="form-label">Area</label>
                                                        <div class="form-data"> {{voterProfileData?.area}} </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <label class="form-label">Party Supported</label>
                                                        <div class="form-data">
                                                            <!-- {{voterProfileData?.partyShortCode}} -->
                                                            <img src="assets/images/logos/ncp.png" class="party-logo me-2">
                                                            ({{voterProfileData?.leaderImportance}} <i class="fas fa-star"></i>)
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <label class="form-label">Migrated</label>
                                                        <div class="form-data">
                                                            {{voterProfileData?.migrated == 'yes' ? 'Yes' : 'No'}} ({{voterProfileData?.migratedArea ? voterProfileData?.migratedArea : ''}})
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <label class="form-label">Agent Name</label>
                                                        <div class="form-data"> {{voterProfileData?.agentName}} </div>
                                                    </div>
                                                    <div class="col-sm-4" *ngIf="posNegativeInfData?.length != 0">
                                                        <label class="form-label">Party/Person Favouring</label>
                                                        <div class="form-data" *ngFor="let posNegInf of posNegativeInfData">
                                                            <span *ngIf="posNegInf.supportToid == 1">{{posNegInf.support}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4" *ngIf="posNegativeInfData?.length != 0">
                                                        <label class="form-label">Party/Person Opposing</label>
                                                        <div class="form-data" *ngFor="let posNegInf of posNegativeInfData">
                                                            <span *ngIf="posNegInf.supportToid == 4">{{posNegInf.support}}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="card mb-3 border shadow-none">
                                    <div class="card-header">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span>Please tick wrong mobile</span>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <span class="d-flex mb-3 small">
                                            <span class="text-success me-2"><i class="fas fa-square-full me-2"></i>
                                                Agents Entered no.</span>
                                            <span class="text-danger"><i class="fas fa-square-full me-2"></i> Other
                                                Entered no.</span>
                                        </span>
                                        <div class="d-flex">
                                            <div class="form-check form-check-inline" *ngIf="contactlistArray?.mobileNo1?.length > 9">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox1" (change)="onCheckWrongContactNumber($event,contactlistArray?.mobileNo1)"
                                                    value="option1">
                                                <label class="form-check-label text-success" for="inlineCheckbox1">{{contactlistArray?.mobileNo1}}</label>
                                            </div>
                                            <div class="form-check form-check-inline" *ngIf="contactlistArray?.mobileNo2?.length > 9">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2"
                                                (change)="onCheckWrongContactNumber($event,contactlistArray?.mobileNo2)" value="option2">
                                                <label class="form-check-label text-success" for="inlineCheckbox2">{{contactlistArray?.mobileNo2}}</label>
                                            </div>
                                            <div class="form-check form-check-inline" *ngFor="let contactlist of contactlistArray?.otherMobileNo.split(',')">
                                                <div *ngIf="contactlistArray?.otherMobileNo">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox3"
                                                (change)="onCheckWrongContactNumber($event,contactlist)" value="option3">
                                                <label class="form-check-label text-danger" for="inlineCheckbox3">{{contactlist}}</label>
                                            </div>
                                            </div>
                                        </div>
                                        <div *ngIf="this.contactlistArray?.mobileNo1?.length > 9 || this.contactlistArray?.mobileNo2?.length > 9 ||  this.contactlistArray?.otherMobileNo?.length > 9">
                                            <button type="submit" class="btn btn-main float-end" (click)="updateContactlist()">Remove</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-8">
                        <div class="form-container">
                            <div class="card shadow-none border">

                                          <!-- ...................... voterProfileForm code start here ...............    -->
                            
                            <div [ngClass]="{'divDisabled':disableDiv}">
                                <form [formGroup]="voterProfileForm">
                                        <div class="card-header d-flex justify-content-between align-items-center">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" formControlName="isNameChange"
                                                  (change)="nameCorrectionCheckBox($event ,'noEdit')" id="flexCheckDefault">
                                                <label class="form-check-label" for="flexCheckDefault">
                                                    Name Correction
                                                </label>
                                            </div>
                                            <div class="form-check float-end">
                                                <input class="form-check-input" type="checkbox" (change)="isExpiredCheckBox($event)" 
                                               [formControl]="isExpiredVoter" [checked]="voterProfileData?.isExpired == 1 ? true : false">
                                                <label class="form-check-label" for="flexCheckDefault">
                                                    Is Expired
                                                </label>  
                                            </div>
                                        </div>

                        <div [ngClass]="{'divDisabled1':expiredDisableDiv}">
                                <div class="card-body" *ngIf="nameCorrectionDivHide">
                                    <div class="row mb-2">
                                        <div class="col-sm-1">
                                            <label class="form-label">English Name:</label>
                                        </div>
                                        <div class="col-sm">
                                            <p>{{voterProfileData?.englishName}}</p>
                                        </div>
                                    </div>
                                    <div class="row mb-2">
                                        <div class="col-sm-1">
                                            <label class="form-label">मराठी</label>
                                        </div>
                                        <div class="col-sm">
                                            <input class="form-control" type="text" placeholder="आडनाव" formControlName="mlName"
                                            [ngClass]="{ 'is-invalid': submittedVP && v.mlName.errors }">
                                        </div>
                                        <div class="col-sm">
                                            <input class="form-control" type="text" placeholder="नाव" formControlName="mfName"
                                            [ngClass]="{ 'is-invalid': submittedVP && v.mfName.errors }">
                                        </div>
                                        <div class="col-sm">
                                            <input class="form-control" type="text" placeholder="मधले नाव" formControlName="mmName"
                                            [ngClass]="{ 'is-invalid': submittedVP && v.mmName.errors }">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-1">
                                            <label class="form-label">English</label>
                                        </div>
                                        <div class="col-sm">
                                            <input class="form-control" type="text" placeholder="Last Name" formControlName="elName"
                                            [ngClass]="{ 'is-invalid': submittedVP && v.elName.errors }">
                                        </div>
                                        <div class="col-sm">
                                            <input class="form-control" type="text" placeholder="First Name" formControlName="efName"
                                            [ngClass]="{ 'is-invalid': submittedVP && v.efName.errors }">
                                        </div>
                                        <div class="col-sm">
                                            <input class="form-control" type="text" placeholder="Middle Name" formControlName="emName"
                                            [ngClass]="{ 'is-invalid': submittedVP && v.emName.errors }"> 
                                        </div>
                                    </div>
                                </div>
                                <div class="card-header">
                                    Contact Information
                                </div>
                                <div class="card-body pt-1">
                                    <div class="row align-items-end g-2">
                                        <div class="col-sm-3">
                                            <label class="form-label">Mobile No. 1</label>
                                            <input class="form-control" type="text" placeholder="Mobile No. 1" 
                                            formControlName="mobileNo1" (keypress)="commonService.acceptedOnlyNumbers($event)" maxlength="10"
                                            [ngClass]="{ 'is-invalid': submittedVP && v.mobileNo1.errors }">
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-check" *ngIf="voterProfileForm.value.mobileNo1?.length > 9">
                                                <input class="form-check-input" type="checkbox" value="" formControlName="watsApp1"
                                                    id="flexCheckDefault2">
                                                <label class="form-check-label" for="flexCheckDefault">
                                                    WhatsApp
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Mobile No. 2</label>
                                            <input class="form-control" type="text" placeholder="Mobile No. 2" 
                                            formControlName="mobileNo2" (keypress)="commonService.acceptedOnlyNumbers($event)" maxlength="10"
                                            [ngClass]="{ 'is-invalid': submittedVP && v.mobileNo2.errors }">
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-check" *ngIf="voterProfileForm.value.mobileNo2?.length > 9">
                                                <input class="form-check-input" type="checkbox" value="" formControlName="watsApp2"
                                                    id="flexCheckDefault1">
                                                <label class="form-check-label" for="flexCheckDefault">
                                                    WhatsApp
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row align-items-end g-2">
                                        <div class="col-sm-3">
                                            <label class="form-label">Nick Name</label>
                                            <input class="form-control" type="text" placeholder="Nick Name" formControlName="nickName">
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Email</label>
                                            <input class="form-control" type="text" placeholder="Email" formControlName="email"
                                            [ngClass]="{ 'is-invalid': submittedVP && v.email.errors }">
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Date of birth</label>
                                                <input [owlDateTime]="dt2" formControlName="dateOfBirth"
                                                    [max]="max"
                                                    class="form-control" [owlDateTimeTrigger]="dt2"
                                                    placeholder="dd/mm/yyyy">
                                            <owl-date-time [pickerType]="'calendar'" #dt2></owl-date-time>
                                         </div>
                                        <div class="col-sm-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="" formControlName="isNotCall"
                                                    id="flexCheckDefault">
                                                <label class="form-check-label" for="flexCheckDefault">
                                                    Do Not Call
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-header">
                                    General Information
                                </div>
                                <div class="card-body pt-1">
                                    <div class="row align-items-end mb-2 g-2">
                                        <div class="col-sm-3">
                                            <label class="form-label">Select Religion</label>
                                            <ngx-select [allowClear]="true" [items]="religionListArray" formControlName="religionId" (remove)="this.voterProfileForm.controls['castId'].setValue('')"
                                              (select)="getVoterCastList(this.voterProfileForm.value.religionId)" optionValueField="reliogionId" optionTextField="religionName" placeholder="Select Religion">
                                            </ngx-select>
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Select Caste</label>
                                            <ngx-select [allowClear]="true" [items]="VoterCastListArray" formControlName="castId" [disabled]="!voterProfileForm.value.religionId"
                                            optionValueField="castId" optionTextField="castName" placeholder="Select Caste">
                                        </ngx-select>
                                        </div>
                                        <div class="col-sm-3" *ngIf="voterListData.AgentId == 0 || voterProfileData?.head == 'yes'">
                                            <label class="form-label">Family Head</label>
                                            <div class="d-block">
                                                <div class="form-check form-check-inline" *ngFor="let head of headCheckArray">
                                                    <input class="form-check-input" type="radio" formControlName="head" (change)="familyHeadRadiobtn()"
                                                    [checked]="head == voterProfileData?.head" name="head" id="inlineRadio1" value="{{head}}">
                                                    <label class="form-check-label" for="inlineRadio1" >{{head}}</label>
                                                </div>
                                            </div>
                                            <!-- <div class="d-block" *ngIf="voterProfileData?.head == 'no'">
                                                <div><small>{{familyHeadName}}</small></div>
                                            </div> -->
                                        </div>
                                            <div class="col-sm-auto" *ngIf="headhideDiv"> 
                                                <label class="form-label">Add Family Member</label>
                                                <div class="d-block">
                                                    <button type="submit" class="btn btn-light btn-sm text-main" data-bs-toggle="modal"
                                                        data-bs-target="#SelectFamilyModal" (click)="getVoterListforFamilyChild()">
                                                        <i class="fas fa-user-plus"></i>
                                                    </button>
                                                </div>
                                            </div>

                                        <div class="col-sm-12" *ngIf="voterProfileFamilyData?.length != 1">
                                            <table class="table table-hover mb-0">
                                                <thead>
                                                    <tr>
                                                        <th>Voter No</th>
                                                        <th>Name</th>
                                                        <th>Mobile No</th>
                                                        <th>Occupation</th>
                                                        <th>House No</th>
                                                        <th>Migration</th>
                                                        <!-- <th>Action</th>   -->
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let familyMember of voterProfileFamilyData;let i=index" [class.active]="familyMember.voterId == HighlightRow" (click)="editFamilyMemberData(familyMember)">
                                                        <td>{{familyMember?.voterNo}}</td>
                                                        <td>{{familyMember?.englishName}} <span *ngIf="familyMember?.familyHead == 1">(Head)</span></td>
                                                        <td>{{familyMember?.mobileNo1 ? familyMember?.mobileNo1 : '-'}}</td>
                                                        <td>{{familyMember?.occupation ? familyMember?.occupation : '-'}}</td>
                                                        <td>{{familyMember?.houseNo ? familyMember?.houseNo : '-'}}</td>
                                                        <td>{{familyMember?.migrated == 'yes' ? 'Yes' : 'No'}}</td>
                                                        <!-- <td>
                                                            <button type="submit" class="btn btn-light btn-sm text-main"
                                                                data-bs-toggle="modal" ;
                                                                data-bs-target="#MigrationDetailsModal">
                                                                <i class="fas fa-suitcase-rolling"></i>
                                                            </button>
                                                        </td> -->
                                                        <!-- <td>
                                                            <button type="button" class="btn btn-light btn-sm text-main">
                                                            <i class="fas fa-edit"></i>
                                                        </button>
                                                        </td> -->
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="row align-items-center g-2">
                                         <div class="col-sm-3">
                                            <label class="form-label">Select Blood Group</label>
                                            <ngx-select [allowClear]="true" [items]="bloodGroupArray" formControlName="bloodgroup" optionValueField="name"
                                                optionTextField="name" placeholder="Select Blood Group">
                                            </ngx-select>
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Qualification</label>
                                            <input class="form-control" type="text" placeholder="Qualification" formControlName="qualification">
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Occupation</label>
                                            <input class="form-control" type="text" placeholder="Occupation" formControlName="occupation">
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Is Graduate</label>
                                            <div class="d-block">
                                                <div class="form-check form-check-inline" *ngFor="let padvidhar of padvidharArray">
                                                    <input class="form-check-input" type="radio" formControlName="isPadvidhar" id="inlineRadio15"
                                                    [checked]="padvidhar.id == voterProfileData?.isPadvidhar" name="isPadvidhar" [value]="padvidhar?.id">
                                                    <label class="form-check-label" for="inlineRadio15" >{{padvidhar.name}}</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-header">
                                    Political Information
                                </div>
                                <div class="card-body pt-1">
                                    <div class="row align-items-center g-2">
                                        <div class="col-sm-3">
                                            <label class="form-label">Select Party</label>
                                            <ngx-select [allowClear]="true" [items]="politicalPartyArray" formControlName="partyId"
                                             optionValueField="partyId" optionTextField="partyName" placeholder="Select Party">
                                        </ngx-select>
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Leader</label>
                                            <div class="d-block">
                                                <div class="form-check form-check-inline" *ngFor="let leader of leaderCheckArray">
                                                    <input class="form-check-input" type="radio" formControlName="leader" (change)="leaderRadiobtn()"
                                                    [checked]="leader == voterProfileData?.leader" name="leader" id="inlineRadio2" value="{{leader}}">
                                                    <label class="form-check-label" for="inlineRadio2" >{{leader}}</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm" *ngIf="leaderhideDiv">
                                            <label class="form-label">Select Rating</label>
                                            <ngx-select [allowClear]="true" [items]="ratingStarArray" formControlName="leaderImportance"
                                            optionValueField="name" optionTextField="name" placeholder="Select Rating"
                                            [ngClass]="{ 'is-invalid': submittedVP && v.leaderImportance.errors }">
                                        </ngx-select>
                                        </div>
                                        <div class="col-sm">
                                            <label class="form-label">Associate Local Leader</label>
                                            <ngx-select [allowClear]="true" [items]="prominentleaderArray" formControlName="prominentLeaderId"
                                            optionValueField="prominentleaderId" optionTextField="leaderName"
                                            placeholder="Select Local leader">
                                        </ngx-select>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-header">
                                    Migration Information
                                </div>
                                <div class="card-body">
                                    <div class="row mb-2">
                                        <div class="col-sm-3">
                                            <label class="form-label">Migrated</label>
                                            <div class="d-block">
                                                <div class="form-check form-check-inline" *ngFor="let migrated of migratedCheckArray">
                                                    <input class="form-check-input" type="radio" formControlName="migrated" (change)="migratedRadiobtn()"
                                                    [checked]="migrated == voterProfileData?.migrated" name="migrated" id="inlineRadio3" value="{{migrated}}">
                                                    <label class="form-check-label" for="inlineRadio3" >{{migrated == 'yes' ? 'Yes' : 'No'}}</label>
                                                </div>
                                            </div>
                                        </div>
                                        <ng-container *ngIf="migratedhideDiv">
                                            
                                            <div class="col-sm-7">
                                                <label class="form-label">Migrated City</label>
                                                <input class="form-control" type="text" [readOnly]="true" autocapitalize="off" placeholder="Migrated City" spellcheck="off"
                                                 formControlName="migratedCity" [ngClass]="{ 'is-invalid': submittedVP && v.migratedCity.errors }">
                                            </div>
                                            <div class="col-sm-2 mt-4">
                                                <button type="submit" class="btn btn-light btn-sm text-main" data-bs-toggle="modal"
                                                    data-bs-target="#MapSelectModal">
                                                    <i class="fas fa-map"></i>
                                                </button>
                                            </div>

                                            <div class="col-sm-12">
                                                <label class="form-label">Migrated Area</label>
                                                <input class="form-control" type="text" [readOnly]="true" placeholder="Migrated Area" formControlName="migratedArea"
                                                [ngClass]="{ 'is-invalid': submittedVP && v.migratedArea.errors }">
                                            </div>
                                        </ng-container>
                                    </div>
                                    <div class="row mb-2 align-items-end">
                                        <div class="col-sm-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" formControlName="postalFlag"
                                                 [checked]="voterProfileData?.postalFlag == 1 ? true : false" (click)="postalVotingCheckBox($event , 'noEdit')">
                                                <label class="form-check-label" for="flexCheckDefault">
                                                    Postal Voting
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-sm-9" *ngIf="postalVotingDivHide">
                                            <label class="form-label">Postal Voting Reason</label>
                                            <input class="form-control" type="text" placeholder="Postal Voting Reason" formControlName="whyIsPostal"
                                            [ngClass]="{ 'is-invalid': submittedVP && v.whyIsPostal.errors }">
                                        </div>
                                    </div>
                                    <div class="row mb-2 align-items-end">
                                        <div class="col-sm-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="" formControlName="needSupportFlag"
                                                [checked]="voterProfileData?.needSupportFlag == 1 ? true : false" (click)="needSupportCheckBox($event, 'noEdit')">
                                                <label class="form-check-label" for="flexCheckDefault">
                                                    Need Support?
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-sm-9" *ngIf="needSupportDivHide">
                                            <label class="form-label">Support Details</label>
                                            <input class="form-control" type="text" placeholder="Support Details" formControlName="needSupportText"
                                            [ngClass]="{ 'is-invalid': submittedVP && v.needSupportText.errors }">
                                        </div>
                                    </div>
                                </div>
                                <div class="card-header">
                                    Other Information
                                </div>
                                <div class="card-body">
                                    <div class="row mb-2 gx-1">
                                        <div class="col-sm-3">
                                            <label class="form-label">Daily Farmer</label>
                                            <div class="d-block">
                                                <div class="form-check form-check-inline" *ngFor="let dairyFarmer of dairyFarmerArray">
                                                    <input class="form-check-input" type="radio" formControlName="isDairyFarmer" name="isDairyFarmer"
                                                    [checked]="dairyFarmer?.id == voterProfileData?.isDairyFarmer" id="inlineRadio4" [value]="dairyFarmer?.id">
                                                    <label class="form-check-label" for="inlineRadio4" >{{dairyFarmer?.name}}</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Goat/Sheep Farmer</label>
                                            <div class="d-block">
                                                <div class="form-check form-check-inline" *ngFor="let goatSheepFarmer of goatSheepFarmerArray">
                                                    <input class="form-check-input" type="radio" formControlName="isGoatSheepFarmer" name="isGoatSheepFarmer"
                                                    [checked]="goatSheepFarmer.id == voterProfileData?.isGoatSheepFarmer" id="inlineRadio5" [value]="goatSheepFarmer.id">
                                                    <label class="form-check-label" for="inlineRadio5" >{{goatSheepFarmer.name}}</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Sugarcane Cutter Worker</label>
                                            <div class="d-block">
                                                <div class="form-check form-check-inline" *ngFor="let sugarCaneCutter of sugarCaneCutterArray">
                                                    <input class="form-check-input" type="radio" formControlName="isSugarCaneCutter" name="isSugarCaneCutter"
                                                    [checked]="sugarCaneCutter.id == voterProfileData?.isSugarCaneCutter" id="inlineRadio6" [value]="sugarCaneCutter.id">
                                                    <label class="form-check-label" for="inlineRadio6" >{{sugarCaneCutter.name}}</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Farmer</label>
                                            <div class="d-block">
                                                <div class="form-check form-check-inline" *ngFor="let farmer of farmerArray">
                                                    <input class="form-check-input" type="radio" formControlName="isFarmer" name="isFarmer"
                                                    [checked]="farmer.id == voterProfileData?.isFarmer" id="inlineRadio7" [value]="farmer.id">
                                                    <label class="form-check-label" for="inlineRadio7" >{{farmer.name}}</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Business</label>
                                            <div class="d-block">
                                                <div class="form-check form-check-inline" *ngFor="let business of businessArray">
                                                    <input class="form-check-input" type="radio" formControlName="haveBusiness" name="haveBusiness"
                                                    [checked]="business.id == voterProfileData?.haveBusiness" id="inlineRadio8" [value]="business.id">
                                                    <label class="form-check-label" for="inlineRadio8" >{{business.name}}</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Yuvak</label>
                                            <div class="d-block">
                                                <div class="form-check form-check-inline" *ngFor="let yuvak of yuvakArray">
                                                    <input class="form-check-input" type="radio" formControlName="isYuvak" name="isYuvak"
                                                    [checked]="yuvak.id == voterProfileData?.isYuvak" id="inlineRadio9" [value]="yuvak.id">
                                                    <label class="form-check-label" for="inlineRadio9" >{{yuvak.name}}</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Vehicle</label>
                                            <div class="d-block">
                                                <div class="form-check form-check-inline" *ngFor="let vehicle of vehicleArray">
                                                    <input class="form-check-input" type="radio" formControlName="haveVehicle" id="inlineRadio10"
                                                    [checked]="vehicle.id == voterProfileData?.haveVehicle" name="haveVehicle" [value]="vehicle.id">
                                                    <label class="form-check-label" for="inlineRadio10" >{{vehicle.name}}</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Income Group</label>
                                            <div class="d-block">
                                                <div class="form-check form-check-inline" *ngFor="let financialCon of financialConditionArray">
                                                    <input class="form-check-input" type="radio" formControlName="financialCondition" name="financialCondition" 
                                                    [checked]="financialCon.id == voterProfileData?.financialCondition" id="inlineRadio11" [value]="financialCon.id">
                                                    <label class="form-check-label" for="inlineRadio11" >{{financialCon.name}}</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mb-2 gx-1">
                                    <div class="col-sm-6">
                                        <label class="form-label">Comment</label>
                                        <textarea class="form-control" rows="3" formControlName="comment" 
                                            placeholder="Comment (If Any)"></textarea>
                                    </div>
                                    <div class="col-sm-6">
                                        <label class="form-label">Privious Comments</label>
                                        <div class="form-data">
                                            <ul *ngFor="let VPComments of VPCommentData" class="list-group list-group-flush mb-0">
                                                <li class="list-group-item ps-0" *ngIf="VPComments?.commentDetails">
                                                    <i class="fas fa-check me-2"></i>
                                                    {{VPComments?.commentDetails}}
                                                </li>
                                            </ul>
                                            <span class="text-danger" *ngIf="VPCommentData?.length == 0">No Comments</span>
                                        </div>
                                    </div>
                                </div>
                            </div> 
                                </div>
                                <div class="d-flex justify-content-between">
                                    <button type="button" class="btn btn-secondary" (click)="getVoterProfileData()">Cancel</button>
                                    <button type="submit" class="btn btn-main" (click)="onSubmitVoterProfile()">Submit</button>
                                </div>
                            </form>
                        </div>
                            </div>

                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="card shadow-none border">
                            <div class="card-header">Enter New Feedback</div>
                            <form [formGroup]="enterNewFeedbackForm" (ngSubmit)="onSubmitFeedbackForm()">
                                <div class="card-body pt-1">
                                    <div class="form-container">
                                        <div class="row mb-2 g-2 align-items-center">
                                            <div class="col-sm-auto">
                                                <label class="form-label required-field">Feedback Type</label><br>
                                                <div class="form-check form-check-inline"
                                                    *ngFor="let feedbackTy of feedbackTypeArray">
                                                    <input class="form-check-input" formControlName="FeedBackType"
                                                        type="radio" [value]="feedbackTy?.id">
                                                    <label class="form-check-label"
                                                        for="chkIsMultipleYes">{{feedbackTy?.name}}</label>
                                                </div>
                                                <div *ngIf="submitted && f.FeedBackType.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="f.FeedBackType.errors.required">Feedback Type is
                                                        required</div>
                                                </div>
                                            </div>

                                            <div class="col-sm-auto">
                                                <label class="form-label">Do Not Call</label>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" value=""
                                                        id="chkDoNotCall" formControlName="NotToCall">
                                                    <label class="form-check-label" for="chkDoNotCall">
                                                        Do Not Call
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-sm">
                                                <label class="form-label required-field">Followup Date-Time</label>
                                                <div class="input-group">

                                                    <input [owlDateTime]="dt3" formControlName="FollowupDate"
                                                        [max]="max"
                                                        class="form-control" [owlDateTimeTrigger]="dt3"
                                                        placeholder="dd/mM/yyyy hh:mm:ss">
                                                </div>
                                                <owl-date-time #dt3></owl-date-time>
                                                <div *ngIf="submitted && f.FollowupDate.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="f.FollowupDate.errors.required">Followup Date is
                                                        required</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mb-2">
                                            <label class="form-label">Feedback</label>
                                            <textarea class="form-control" rows="3" placeholder="Enter Feedback"
                                                formControlName="Description"></textarea>
                                        </div>
                                        <div class="mb-0 row">
                                            <div class="col-sm-6">
                                                <button type="button" class="btn btn-secondary btn-sm me-2"
                                                    (click)="clearForm()">Cancel</button>
                                            </div>
                                            <div class="col-sm-6 text-end">
                                                <!-- [mat-dialog-close]="true" -->
                                                <button type="submit" class="btn btn-sm btn-main">Submit
                                                    Feedback</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <p class="mb-1 fw-bold small mt-3">Feedbacks</p>
                        <div class="table-feedbacks mb-3">
                            <table class="table table-hover mb-0">
                                <thead>
                                    <tr>
                                        <th>Sr. No.</th>
                                        <th>Feedback Details</th>
                                        <th>Followup</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr
                                        *ngFor="let feedbacksList  of getFeedbacksList | paginate: { itemsPerPage: 10, currentPage: feedbacksPaginationNo, totalItems:getFeedbacksListTotal}; let i = index">
                                        <td>{{((feedbacksPaginationNo + 1) * 10 + i + 1)-20}}</td>
                                        <td>
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <small class="text-muted">{{feedbacksList?.feedBackDate}}</small>
                                                </div>
                                                <div class="col-sm-6 text-end">
                                                    <span class="badge rounded-pill bg-success fw-normal"
                                                        *ngIf="feedbacksList?.feedBackTypeId == 1">
                                                        {{feedbacksList?.feedBackType |
                                                        titlecase}}</span>
                                                    <span class="badge rounded-pill bg-danger fw-normal"
                                                        *ngIf="feedbacksList?.feedBackTypeId == 2">
                                                        {{feedbacksList?.feedBackType |
                                                        titlecase}}</span>
                                                    <span class="badge rounded-pill bg-warning fw-normal text-dark"
                                                        *ngIf="feedbacksList?.feedBackTypeId == 3">
                                                        {{feedbacksList?.feedBackType |
                                                        titlecase}}</span>
                                                </div>
                                                <div class="col-sm-12">
                                                    {{feedbacksList?.description ? (feedbacksList?.description |
                                                    titlecase) : '-'}}
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            {{feedbacksList?.followupDate}}
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="mt-2 text-end" *ngIf="getFeedbacksList?.length == 0">
                                <div class="alert alert-danger text-center py-2">No Data Found..!</div>
                            </div>
                            <div class="mt-2 text-end" *ngIf="getFeedbacksList?.length != 0">
                                <pagination-controls previousLabel="" nextLabel=""
                                    (pageChange)="onClickPagintion(feedBackPageSize = $event)">
                                </pagination-controls>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Modal to select voters for family  -->
<div class="modal fade" id="SelectFamilyModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="SelectFamilyModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <p class="modal-title" id="SelectFamilyModalLabel">Select Family Members</p>
                <button type="button" class="btn-close" data-bs-dismiss="modal" (click)="clearFamilyTree()" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="form-container">
                    <div class="input-group mb-3">
                        <input class="form-control" type="text" placeholder="Select By Voter Name" [(ngModel)]="familyMembersFilter.englishName">
                        <button type="button" class="btn btn-light">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>

                    <table class="table table-hover mb-0">
                        <thead>
                            <tr>
                                <th>Voter No.</th>
                                <th>Voter Name (Age)</th>
                                <th>Migrated</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let familyChild  of voterListforFamilyChildArray | filterBy: familyMembersFilter">
                                <td>{{familyChild?.voterNo}}</td>
                                <td>{{familyChild?.englishName}} ({{familyChild?.age}})</td>
                                <td>{{familyChild?.migrated == 'yes' ? 'Yes' : 'No'}}</td>
                                <td>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="flexCheckDefault"
                                        [checked]="familyChild?.isMember == 1"
                                        (change)="onCheckChangeChildVoterDetail($event, familyChild)">
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="mt-2 text-end" *ngIf="voterListforFamilyChildArray?.length == 0">
                        <div class="alert alert-danger text-center py-2">No Data Found..!
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer"> 
                <!-- d-flex w-100 justify-content-between -->
                <!-- <button type="button" class="btn btn-secondary" (click)="clearFamilyTree()">Cancel</button> -->
                <button type="submit" class="btn btn-main float-end" data-bs-dismiss="modal" (click)="submitFamilyTree()">Add Member</button>
            </div>
        </div>
    </div>
</div>


<!-- Modal to select voters for family  -->
<div class="modal fade" id="MigrationDetailsModal" tabindex="-1" aria-labelledby="MigrationDetailsModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <p class="modal-title" id="MigrationDetailsModalLabel">Migration Details</p>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="form-container">
                    <div class="mb-2">
                        <label class="form-label">Voter Name</label>
                        <div class="form-data">Vasant Namdev Gharge</div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <label class="form-label">Mobile No. 1</label>
                            <input class="form-control" type="text" placeholder="Mobile No. 1">
                        </div>
                        <div class="col-sm-6">
                            <label class="form-label">Mobile No. 2</label>
                            <input class="form-control" type="text" placeholder="Mobile No. 2">
                        </div>
                    </div>
                    <div class="mb-2">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                            <label class="form-check-label" for="flexCheckDefault">
                                Is Expired
                            </label>
                        </div>
                    </div>
                    <p class="fw-bold mb-2">Migration Information</p>
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <label class="form-label">Migrated</label>
                            <div class="d-block">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="inlineRadioOptions"
                                        id="inlineRadio1" value="Yes">
                                    <label class="form-check-label" for="inlineRadio1">Yes</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="inlineRadioOptions"
                                        id="inlineRadio2" value="No">
                                    <label class="form-check-label" for="inlineRadio2">No</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <label class="form-label">Migrated City</label>
                            <input class="form-control" type="text" placeholder="Migrated City">
                        </div>
                        <div class="col-sm-12">
                            <label class="form-label">Migrated Reason</label>
                            <input class="form-control" type="text" placeholder="Migrated Reason">
                        </div>
                    </div>
                    <div class="mb-2">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                            <label class="form-check-label" for="flexCheckDefault">
                                Postal Voting
                            </label>
                        </div>
                    </div>
                    <div class="mb-2">
                        <label class="form-label">Postal Voting Reason</label>
                        <input class="form-control" type="text" placeholder="Postal Voting Reason">
                    </div>
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <label class="form-label">Youth Leader</label>
                            <div class="d-block">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="inlineRadioOptions"
                                        id="inlineRadio1" value="Yes">
                                    <label class="form-check-label" for="inlineRadio1">Yes</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="inlineRadioOptions"
                                        id="inlineRadio2" value="No">
                                    <label class="form-check-label" for="inlineRadio2">No</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <label class="form-label">Leader Rating</label>
                            <select class="form-select">
                                <option value="">Select Rating</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-0">
                        <label class="form-label">Comment</label>
                        <textarea class="form-control" rows="4" placeholder="Comment"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer d-flex w-100 justify-content-between">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-main">Save Details</button>
            </div>
        </div>
    </div>
</div>


<!-- Modal to select Map Address   -->
<div class="modal fade" id="MapSelectModal" tabindex="-1" aria-labelledby="MapSelectModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <p class="modal-title" id="MapSelectModalLabel">Address Details</p>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body mt-20">
            <input class="form-control" type="text" autocapitalize="off" [formControl]="searchAdd" spellcheck="off" #search>
                <agm-map [latitude]="latitude" [longitude]="longitude" (mapClick)="markerDragEnd($event)">
                    <div *ngIf="latitude">
                        <agm-marker [latitude]="latitude" [longitude]="longitude" (dragEnd)="markerDragEnd($event)"
                            [markerDraggable]="true">
                        </agm-marker>
                    </div>
                </agm-map>
            </div>
        </div>
    </div>
</div>